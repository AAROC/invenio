--------------------------------------------------------------------
CDS Invenio v0.99.0 is released
FIXME 20, 2008
http://cdsware.cern.ch/invenio/news.html
--------------------------------------------------------------------

CDS Invenio v0.99.0 was released on FIXME 20, 2008.

What's new:
-----------

 *) FIXME

Download:
---------

  <http://cdsware.cern.ch/download/cds-invenio-0.99.0.tar.gz>
  <http://cdsware.cern.ch/download/cds-invenio-0.99.0.tar.gz.md5>
  <http://cdsware.cern.ch/download/cds-invenio-0.99.0.tar.gz.sig>

Installation notes:
-------------------

Please follow the INSTALL file bundled in the distribution tarball.

Upgrade notes:
--------------

If you are upgrading from CDS Invenio v0.92.1, then please follow the
following steps:

   - Launch the bibsched monitor and wait until all active bibsched
     tasks are finished.  Then put bibsched daemon into manual mode.

   - Stop all submission procedures and other write operations.  For
     example, you may want to stop Apache, edit httpd.conf to
     introduce a global site redirect to a temporary splash page
     saying that upgrade is in progress, and restart Apache.

   - Take a backup of your current MySQL database and your CDS Invenio
     installation directory (usually /opt/cds-invenio).

   - First of all, note that CDS Invenio v0.99.0 must use MySQL server
     at least 4.1 and the database must be running in UTF-8 mode.  If
     you have been running olderon MySQL server, or you have not
     created your database and data in default charset UTF-8 but say
     in Latin-1, then you must dump and reload all your tables.  In
     order to check which version and charset you have been using, you
     can run:

        $ echo "SELECT VERSION()" | /opt/cds-invenio/bin/dbexec
        $ echo "SHOW CREATE DATABASE cdsinvenio" | /opt/cds-invenio/bin/dbexec
        $ echo "SHOW CREATE TABLE bib10x" | /opt/cds-invenio/bin/dbexec

     FIXME: provide some more detailed instructions how to dump data,
     alter table charset, and load data back.

     Note that the table definition and data charset altering process
     may take some time.  If you have to upgrade your MySQL server as
     well, you may want to prepare the migration on another server.

   - Second of all, you must upgrade some Python modules, namely your
     MySQLdb module as indicated in the INSTALL file.  Note that this
     will make your current site unusable, but we have stopped Apache
     already anyway.  If you have been using Stemmer, you must upgrade
     its version as indicated in the INSTALL file.  The version is not
     backward-compatible.

   - Untar new sources and rerun configure with old prefix argument
     (your old configure line is available at
     /opt/cds-invenio-BACKUP/etc/build/config.nice) and install CDS
     Invenio (see INSTALL file, part 1a).

   - CDS Invenio v0.99.0 uses a new INI-style of configuration.
     Please see INSTALL file, part 1b on how to customize your
     installation.  You will have to create 'invenio-local.conf' where
     you have to merge your old config.wml values (they are available
     at /opt/cds-invenio-BACKUP/lib/wml/invenio/config.wml).  Beware
     of variable name updates, e.g. 'filedirsize' now became
     'CFG_WEBSUBMIT_FILESYSTEM_BIBDOC_GROUP_LIMIT'.

   - If you have previously customized your page header and footer via
     WML, then you should now put your page customizations in a new
     template skin (please see the WebStyle Admin Guide for more
     information).  Also, if you have edited v0.92.1 CSS style sheet,
     you may want to merge your changes into new elements of the
     0.99.0 style sheet.

   - If you have customized your /opt/cds-invenio/etc/ files in the
     last installation (for example to edit the stopwords list or
     configure language stemmers), then you have to restore your
     changes into corresponding /opt/cds-invenio/etc files.

   - Update your database table structure:

        $ make update-v0.92.1-tables

     If you are upgrading from previous CDSware releases such as
     v0.7.1, then you may need to run more update statements of this
     kind, as indicated in previous RELEASE-NOTES files.  (You could
     also start afresh, copying your old data into a fresh v0.99.0
     installation.)

   - If you have previously customized your page templates
     (e.g. webbasket_templates.py), then check for changes the new
     version brings:

        $ make check-custom-templates

          This script will check if your customized page templates
          (see the WebStyle Admin Guide) still conform to the default
          templates.  This gives you a chance to fix your templates
          before running 'make install', by providing a list of
          incompatibilities of your custom templates with the new
          versions of the templates.

          This step is only useful if you are upgrading and if you
          have previously customized default page templates.

   - You have also to run manually several migration scripts:

        $ python ./modules/webaccess/lib/collection_restrictions_migration_kit.py

           This script will migrate restricted collections that used
           Apache user groups to a new firewall-like role definition
           language.

        $ python ./modules/websubmit/lib/fulltext_files_migration_kit.py

           This script will check and update your fulltext file
           storage system to the new style (e.g. unique document
           names).

        $ python ./modules/websession/lib/password_migration_kit.py

           This script will update your local user table in order to
           use encrypted passwords for more security.

   - CDS Invenio v0.99.0 uses new, faster word indexer.  You will have
     to reindex all your indexes by running:

        $ /opt/cds-invenio/bin/bibindex -u admin -R

   - You have to edit your httpd.conf in order to make Apache aware of
     new URLs.  Please run:

        $ /opt/cds-invenio/bin/inveniocfg --create-apache-conf

     and check differences with your current setup and edit as
     appropriate.

   - Restart Apache and check whether everything is alright with your
     system.  

     Note that the detailed record pages (/record/10) have now a
     tab-style look by default.  You may want to update your formats
     to this style or else to disable this feature.  Please see the
     WebStyle Admin Guide for more information.

   - Put the bibsched daemon back into the automatic mode.  You are
     done.

Further notes and issues:
-------------------------

 *) Some modules of this release (e.g. mail submission system) are
    still experimental and not yet activated.  You may have a peek at
    what is planned, but please do not rely on them.

 *) The admin-level functionality of several modules is not fully
    developed or documented yet.

What's next:
------------

 *) Improving the known issues mentioned above.  Strengthening the
    documentation towards v1.0 release.

 *) Improving the record editing capabilities.

 *) Deploying the new URL schema for all pages (admin).

- end of file -